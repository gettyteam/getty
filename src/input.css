@import './theme-tokens.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-family: var(--font-sans);
  }

  body {
    font-family: var(--font-sans);
  }
}

@layer components {
  :root {
    color-scheme: light dark;
  }
  html:not(.dark) .theme-light .message:not(.has-donation) .message-text-inline {
    color: var(--text) !important;
  }
  html:not(.dark) .chat-default:not(.theme-active) .message.has-donation .message-text-inline {
    color: #111 !important;
  }
  html:not(.dark) .chat-default .message {
    color: #fff !important;
  }
  html:not(.dark)
    #chat-container.theme-active:not(.theme-light)
    .message:not(.has-donation)
    .message-text-inline {
    color: #fff !important;
  }
  .raffle-embed .raffle-header {
    margin-bottom: 0.25rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .raffle-embed .participants-list {
    max-height: 200px;
    margin: 0.25rem 0;
  }
  .raffle-embed .participant {
    border-bottom-color: rgb(255 255 255 / 8%);
  }
  .raffle-embed .winner-name {
    letter-spacing: 0.3px;
  }
  .raffle-embed .stats {
    color: #94a3b8;
    margin-top: 0.375rem;
  }
  .raffle-status-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    border-radius: 4px;
    border: 1px solid rgb(148 163 184 / 28%);
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 0.2px;
    text-transform: initial;
    background: rgb(148 163 184 / 12%);
    color: #cbd5e1;
  }
  .raffle-status-badge.active {
    background: rgb(52 211 153 / 12%);
    border-color: rgb(52 211 153 / 35%);
    color: #34d399;
  }
  .raffle-status-badge.paused {
    background: rgb(251 191 36 / 12%);
    border-color: rgb(251 191 36 / 35%);
    color: #fbbf24;
  }
  .raffle-status-badge.inactive {
    background: rgb(148 163 184 / 12%);
    border-color: rgb(148 163 184 / 35%);
    color: #94a3b8;
  }
  .raffle-status-badge .dot {
    width: 6px;
    height: 6px;
    border-radius: 999px;
    background: currentcolor;
    box-shadow: 0 0 8px currentcolor;
  }
  html:not(.dark) .raffle-embed .raffle-prize-label,
  html:not(.dark) .raffle-embed .raffle-participants-label,
  html:not(.dark) .raffle-embed .raffle-participant-count,
  html:not(.dark) .raffle-embed .raffle-winner-title {
    color: #fff !important;
  }
  html:not(.dark) .raffle-embed .participant {
    color: #fff !important;
  }

  .os-panel-title .icon svg {
    width: 18px;
    height: 18px;
    stroke: currentcolor;
    stroke-width: 2;
    stroke-linecap: round;
    stroke-linejoin: round;
    fill: none;
  }
  html.dark .os-panel-title .icon svg {
    stroke: #fff;
    fill: none;
  }
  html:not(.dark) .os-panel-title .icon svg {
    stroke: #111;
    fill: none;
  }
  .footer-x-bg {
    fill: #000;
  }
  .footer-x-fg {
    fill: #fff;
  }
  html.dark .footer-x-bg {
    fill: #fff;
  }
  html.dark .footer-x-fg {
    fill: #000;
  }

  .skeleton {
    position: relative;
    overflow: hidden;
    background: rgb(148 163 184 / 15%);
    border-radius: 6px;
  }
  .skeleton::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, transparent, rgb(148 163 184 / 25%), transparent);
    transform: translateX(-100%);
    animation: sk 1.2s infinite;
  }

  @keyframes sk {
    to {
      transform: translateX(100%);
    }
  }
  .reduced-motion .skeleton::after {
    animation: none;
    display: none;
  }
  .skeleton.hidden {
    display: none !important;
  }
  .skeleton-line {
    height: 12px;
    margin: 6px 0;
  }
  .skeleton-lg {
    height: 24px;
  }
  .skeleton-chip {
    height: 18px;
    width: 80px;
    border-radius: 999px;
  }
  .fade-in {
    opacity: 0;
    animation: fi 0.28s ease-out forwards;
  }

  @keyframes fi {
    to {
      opacity: 1;
    }
  }
  .reduced-motion .fade-in {
    animation: none;
    opacity: 1;
  }
  .os-surface {
    @apply bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-os shadow-os;
  }
  .os-subtle {
    @apply bg-neutral-50 dark:bg-neutral-900/40 border border-neutral-200/70 dark:border-neutral-800/80 rounded-os text-sm;
  }
  .os-divider {
    @apply border-t border-neutral-200 dark:border-neutral-800;
  }
  .os-muted {
    @apply text-neutral-500 dark:text-neutral-400;
  }
  .os-strong {
    @apply text-neutral-900 dark:text-neutral-100;
  }

  .os-header {
    @apply sticky top-0 z-40 backdrop-blur border-b border-neutral-200 dark:border-neutral-800;
    background-color: rgb(253 252 252 / 0.7);
  }
  .os-header:is(.dark *) {
    background-color: rgb(9 9 11 / 0.6);
  }
  .os-header-inner {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-14 flex items-center gap-3;
  }
  .os-header-title {
    @apply text-sm font-semibold tracking-wide text-neutral-900 dark:text-neutral-100;
  }
  .os-header-kpi {
    @apply inline-flex items-center gap-1 rounded-os-sm px-2 py-1 border border-neutral-200 dark:border-neutral-800 text-xs text-neutral-600 dark:text-neutral-300 bg-neutral-50 dark:bg-neutral-900;
  }

  .os-sidebar {
    @apply bg-white dark:bg-neutral-950 border-r border-neutral-200 dark:border-neutral-800 w-64 shrink-0;
  }
  .os-sidebar-section {
    @apply px-3 py-2;
  }
  .os-sidebar-label {
    @apply px-3 pb-2 text-[10px] font-semibold tracking-wider uppercase text-neutral-500;
  }
  .os-nav-link {
    @apply flex items-center gap-2 px-3 py-2 rounded-os-sm text-[0.8rem] text-neutral-600 dark:text-neutral-300 hover:text-neutral-900 hover:bg-neutral-50 dark:hover:text-neutral-100 dark:hover:bg-neutral-900 transition;
  }
  .os-nav-link[aria-current='page'],
  .os-nav-link.is-active {
    @apply bg-neutral-100 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 font-medium border border-neutral-200 dark:border-neutral-800;
  }
  .os-icon {
    @apply w-4 h-4 text-neutral-400 group-hover:text-neutral-700 dark:text-neutral-500 dark:group-hover:text-neutral-200;
  }

  .os-card {
    @apply os-surface p-4;
  }
  .os-card:is(.dark *) {
    background-color: var(--bg-card);
  }
  .os-card-title {
    @apply text-sm font-semibold mb-2 text-neutral-900 dark:text-neutral-100;
  }
  .os-card-meta {
    @apply text-xs os-muted;
  }

  .os-table {
    @apply w-full text-sm;
  }
  .os-tr {
    @apply grid grid-cols-12 items-center border-b border-neutral-200 dark:border-neutral-800;
  }
  .os-th {
    @apply os-muted font-semibold py-2 px-3;
  }
  .os-td {
    @apply py-2 px-3 text-neutral-800 dark:text-neutral-200;
  }

  .dashboard-container {
    @apply mx-auto;
  }

  .dashboard-header {
    @apply flex justify-between items-center pb-5 mb-8 border-b border-gray-800;
  }

  .connection-status {
    @apply flex items-center gap-2;
  }

  .status-dot {
    @apply w-2.5 h-2.5 rounded-full;
  }
  .status-dot.connected {
    @apply bg-green-500 shadow-[0_0_8px] shadow-green-500;
  }
  .status-dot.disconnected {
    @apply bg-red-500 shadow-[0_0_8px] shadow-red-500;
  }

  .widgets-grid {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-8;
  }

  .widget {
    @apply bg-gray-800 rounded-lg shadow-lg overflow-hidden flex flex-col;
  }

  .widget-chat {
    @apply bg-gray-800 rounded-lg shadow-lg overflow-hidden flex flex-col h-[450px];
  }

  .widget h2 {
    @apply px-6 pt-4 text-lg font-semibold text-white;
  }

  .widget-content {
    @apply p-3 flex-1 flex flex-col justify-center;
  }

  .last-donation {
    @apply text-white overflow-hidden rounded-[4px];
  }

  .last-donation-content {
    @apply p-2.5 flex items-center bg-[#080c10];
  }

  .notification-icon-lasttip {
    @apply flex items-center justify-center w-[78px] h-[78px] min-w-[78px] min-h-[78px] rounded bg-[#eaeaea] mr-[15px] ml-[5px];
  }
  .notification-icon-lasttip svg {
    @apply w-[60px] h-[60px] block mt-[2px] text-[#080c10];
  }
  .notification-from-lasttip {
    @apply text-xs font-semibold flex items-center;
  }

  .notification-text {
    @apply flex-1;
  }

  .notification-title {
    @apply text-[20px] font-extrabold mb-[5px] text-white;
  }

  html:not(.dark) .notification-title {
    @apply text-[20px] font-extrabold text-white;
    color: #fff !important;
  }
  html:not(.dark) body .last-donation .notification-title {
    color: #fff !important;
  }

  .notification-amount {
    @apply text-2xl font-extrabold;
  }

  .message {
    @apply py-0 break-words max-w-full;
  }

  .message-header {
    @apply flex items-start mb-0;
  }

  .message-text-inline {
    @apply text-gray-100 leading-snug break-words;
  }
  .message-username {
    @apply text-sm font-semibold mr-1.5 text-green-400 capitalize;
  }

  .comment-emoji,
  .comment-sticker {
    @apply max-w-5 max-h-5 align-middle;
  }

  .message-donation {
    @apply ml-auto;
  }

  @media (max-width: 768px) {
    .widget-chat {
      @apply h-[250px];
    }
    .widget-content-chat {
      @apply p-2;
    }
  }
  .os-panel-title {
    display: flex;
    align-items: center;
    gap: 8px;
    padding-left: 1.5rem;
    padding-right: 1.5rem;
    font-size: 1.25rem;
    line-height: 1.75rem;
    font-weight: 600;
    margin: 0.25rem 0 0.5rem;
    color: var(--text-primary);
  }
  .os-panel-title .icon {
    width: 18px;
    height: 18px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
  }

  html:not(.dark) body.landing .os-panel-title,
  html:not(.dark) body.landing .os-panel-title .icon {
    color: #111 !important;
  }
  html.dark body.landing .os-panel-title,
  html.dark body.landing .os-panel-title .icon {
    color: #fff !important;
  }
}

@layer utilities {
  .os-logo-mobile {
    display: none;
  }

  @media (max-width: 639px) {
    #public-wallet-login {
      min-width: 0;
      max-width: 100%;
    }
    #public-wallet-login #login-balance {
      display: none !important;
    }
    .os-logo-desktop {
      display: none !important;
    }

    .os-logo-mobile {
      display: block !important;
    }
    #public-wallet-login .btn-label {
      display: inline-block;
      min-width: 0;
      max-width: 7ch;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
  }
}
